{"version":3,"sources":["src/date-silder-helpers.ts","src/date-slider-event-context.ts","src/date-slider-event-handler.ts","src/date-slider-instance.ts","src/date-slider-model.ts","src/date-slider.ts","src/vector.ts","src/formatter/custom-formatter.ts","src/formatter/date-formatter.ts","src/formatter/string-formatter.ts","src/formatter/unix-timestamp-formatter.ts","src/parser/custom-parser.ts","src/parser/date-parser.ts","src/parser/string-parser.ts","src/parser/unix-timestamp-parser.ts","src/slider/slider-instance.ts","src/slider/slider-range.ts","src/slider/context/slider-value-change-context.ts"],"names":[],"mappings":"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","file":"date-slider.js","sourcesContent":["module DateSlider {\r\n    export class DateSliderHelpers {\r\n        /**\r\n         * Registers a listener to the element's destroy.\r\n         * @param element The element whose destroy event should be watched.\r\n         * @param callback A callback method with an optional event parameter.\r\n         * The parameter is an Event, if the 'DOMNodeRemoved' event was caught.\r\n         * The parameter is undefined if a MutationObserver was used to watch the element's destroy event.\r\n         */\r\n        public static registerOnDestroy(element: HTMLElement, callback: (event?: Event) => void): void {\r\n            if ((window as Window & { MutationObserver?: any}).MutationObserver && element.parentElement) {\r\n                let observer = new MutationObserver((mutations) => {\r\n                    let isTargetRemoved = mutations.some((mutation) => {\r\n                        for (let i = 0; i < mutation.removedNodes.length; i++) {\r\n                            if (mutation.removedNodes[i] === element) {\r\n                                return true;\r\n                            }\r\n                        }\r\n                        return false;\r\n                    });\r\n                    if (isTargetRemoved) {\r\n                        callback();\r\n                        observer.disconnect();\r\n                    }\r\n                });\r\n\r\n                observer.observe(element.parentNode, { childList: true, subtree: true });\r\n            } else {\r\n                element.addEventListener(\"DOMNodeRemoved\", (event) => callback(event), false);\r\n            }\r\n        }\r\n    }\r\n}\r\n","module DateSlider {\r\n    export class DateSliderEventContext {\r\n        private _isPropagationStopped = false;\r\n\r\n        public get isPropagationStopped() {\r\n            return this._isPropagationStopped;\r\n        }\r\n\r\n        public stopPropagation(): void {\r\n            this._isPropagationStopped = true;\r\n        }\r\n    }\r\n}\r\n","module DateSlider {\r\n    export class DateSliderEventHandler {\r\n        private events: ((context: DateSliderEventContext) => void)[] = [];\r\n\r\n        public register(handler: (context: DateSliderEventContext) => void, index?: number): void {\r\n            if (!handler) {\r\n                return;\r\n            }\r\n\r\n            if (typeof handler !== \"function\") {\r\n                throw new Error(\"DateSliderEventHandler.register(): handler is not given or not a function.\");\r\n            }\r\n            if ((typeof index !== \"undefined\" || index !== null) && 0 <= index && index < this.events.length) {\r\n                this.events.splice(index, 0, handler);\r\n            } else {\r\n                this.events.push(handler);\r\n            }\r\n        }\r\n\r\n        public fire(context: DateSliderEventContext): void {\r\n            for (let callback of this.events) {\r\n                callback(context);\r\n                if (context.isPropagationStopped) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n","module DateSlider {\r\n    export class DateSliderInstance {\r\n        public sliders: Slider.SliderInstance[];\r\n        public parser: Parser.IParser;\r\n        public formatter: Formatter.IFormatter;\r\n\r\n        constructor(\r\n            public element: HTMLElement,\r\n            private options: DateSliderOptions,\r\n            private value?: DateSliderModel,\r\n        ) {\r\n            if (!element || !element.parentNode) {\r\n                throw new Error(\"DateSlider.create(): Given HTML element is invalid.\");\r\n            }\r\n            this.sliders = Slider.SliderInstance.createAll(options);\r\n            let wrapper = this.createWrapper(this.sliders);\r\n            element.parentNode.replaceChild(wrapper, element);\r\n            DateSliderHelpers.registerOnDestroy(wrapper, (event) => {\r\n                for (let slider of this.sliders) {\r\n                    slider.destroy(event);\r\n                }\r\n            });\r\n\r\n            this.bindParser();\r\n            this.bindFormatter();\r\n        }\r\n\r\n        public getValue(): any {\r\n            return this.formatter.format(this.value, this.options.formatterOptions);\r\n        }\r\n\r\n        public setValue(input: any): void {\r\n            this.value = this.parser.parse(input, this.options.parserOptions);\r\n            // TODO update sliders\r\n        }\r\n\r\n        public getOptions(): DateSliderOptions {\r\n            return this.options;\r\n        }\r\n\r\n        public updateOptions(options: DateSliderOptions): void {\r\n\r\n        }\r\n\r\n        public replaceOptions(options: DateSliderOptions): void {\r\n\r\n        }\r\n\r\n        public on(eventName: DateSliderEvent, callback: (context: DateSliderEventContext) => DateSliderEventContext): void {\r\n\r\n        }\r\n\r\n        private bindFormatter(): void {\r\n            if (typeof this.options.formatter === \"string\") {\r\n                switch (this.options.formatter) {\r\n                    case \"timestamp\":\r\n                        this.formatter = new Formatter.UnixTimestampFormatter();\r\n                        break;\r\n                    case \"date\":\r\n                        this.formatter = new Formatter.DateFormatter();\r\n                        break;\r\n                    case \"string\":\r\n                        this.formatter = new Formatter.StringFormatter();\r\n                        break;\r\n                    default:\r\n                        throw new Error(\"DateSlider.create(): Invalid formatter.\");\r\n                }\r\n            } else if (typeof this.options.formatter === \"function\") {\r\n                this.formatter = new Formatter.CustomFormatter(this.options.formatter);\r\n            } else {\r\n                throw new Error(\"DateSlider.create(): Invalid formatter.\");\r\n            }\r\n        }\r\n\r\n        private bindParser(): void {\r\n            if (typeof this.options.parser === \"string\") {\r\n                switch (this.options.parser) {\r\n                    case \"timestamp\":\r\n                        this.parser = new Parser.UnixTimestampParser();\r\n                        break;\r\n                    case \"date\":\r\n                        this.parser = new Parser.DateParser();\r\n                        break;\r\n                    case \"string\":\r\n                        this.parser = new Parser.StringParser();\r\n                        break;\r\n                    default:\r\n                        throw new Error(\"DateSlider.create(): Invalid parser.\");\r\n                }\r\n            } else if (typeof this.options.parser === \"function\") {\r\n                this.parser = new Parser.CustomParser(this.options.parser);\r\n            } else {\r\n                throw new Error(\"DateSlider.create(): Invalid parser.\");\r\n            }\r\n        }\r\n\r\n        private createWrapper(sliders: Slider.SliderInstance[]): HTMLDivElement {\r\n                let fragment = document.createDocumentFragment();\r\n                for (let slider of sliders) {\r\n                    fragment.appendChild(slider.element);\r\n                }\r\n                let wrapper = document.createElement(\"div\");\r\n                wrapper.classList.add(\"date-slider\");\r\n                wrapper.appendChild(fragment);\r\n                // in the appendChild method the silders' destroy method would be called because it fires the 'DOMNodeRemoved' event\r\n                // also only after this will the sliders' element gain a parent to use the MutationObserver\r\n                for (let slider of sliders) {\r\n                    DateSliderHelpers.registerOnDestroy(slider.element, (event) => slider.destroy(event));\r\n                }\r\n                return wrapper;\r\n        }\r\n    }\r\n}\r\n","module DateSlider {\r\n    export class DateSliderModel {\r\n        constructor(\r\n            public model: InnerModel | null,\r\n            public rawValue: any,\r\n        ) {\r\n        }\r\n    }\r\n\r\n    export class InnerModel {\r\n        constructor(\r\n            public year?: number,\r\n            /** In the range [1, 12]. */\r\n            public month?: number,\r\n            /** In the range of [1, 31]. */\r\n            public day?: number,\r\n            public hour?: number,\r\n            public minute?: number,\r\n            public second?: number,\r\n            public timezone?: string,\r\n        ) {\r\n        }\r\n    }\r\n}\r\n","module DateSlider {\r\n    export let defaults: DateSliderOptions = {};\r\n\r\n    export function create(element: HTMLElement, options: DateSliderOptions): DateSliderInstance {\r\n        if (!element) {\r\n            throw new Error(\"DateSlider.create(): Given HTML element is invalid.\");\r\n        }\r\n\r\n        return new DateSliderInstance(element, mergeOptions(options, defaults));\r\n    }\r\n\r\n    function mergeOptions(instanceOptions: DateSliderOptions, defaultOptions: DateSliderOptions): DateSliderOptions {\r\n        return instanceOptions;\r\n    }\r\n\r\n    // TODO\r\n    // Date.parse() or write own implementation to parse from formats -> own\r\n    // test range\r\n    // demo: out of the box, full customization\r\n    // instance.refresh\r\n    // on creation getter setter for outside model\r\n    // slider distance of mouse from handle -> slowness of steps\r\n    // touch events: stop scroll when moving the slider\r\n}\r\n","module DateSlider {\r\n    export class Vector {\r\n        constructor(\r\n            public x: number,\r\n            public y: number,\r\n        ) {\r\n        }\r\n\r\n        public add(vector: Vector): Vector {\r\n            return new Vector(this.x + vector.x, this.y + vector.y);\r\n        }\r\n\r\n        public difference(vector: Vector): Vector {\r\n            return new Vector(this.x - vector.x, this.y - vector.y);\r\n        }\r\n\r\n        public scalarTimes(scalar: number): Vector {\r\n            return new Vector(this.x * scalar, this.y * scalar);\r\n        }\r\n\r\n        public dot(vector: Vector): number {\r\n            return this.x * vector.x + this.y * vector.y;\r\n        }\r\n\r\n        public length(): number {\r\n            return Math.sqrt(this.x * this.x + this.y * this.y);\r\n        }\r\n    }\r\n}\r\n","module DateSlider.Formatter {\r\n    export class CustomFormatter implements IFormatter {\r\n        constructor(\r\n            public format: (input: DateSliderModel, options: any) => any,\r\n        ) {\r\n        }\r\n    }\r\n}\r\n","module DateSlider.Formatter {\r\n    export class DateFormatterOptions {\r\n        constructor(\r\n            public type: \"local\" | \"utc\",\r\n        ) {\r\n        }\r\n    }\r\n\r\n    export class DateFormatter implements IFormatter {\r\n        /**\r\n         * Formats a Date object from a DateSliderModel object.\r\n         */\r\n        public format(input: DateSliderModel, options: DateFormatterOptions): Date {\r\n            return new Date();\r\n        }\r\n    }\r\n}\r\n","module DateSlider.Formatter {\r\n    export class StringFormatterOptions {\r\n        constructor(\r\n            public format: string,\r\n            public culture: string,\r\n        ) {\r\n        }\r\n    }\r\n\r\n    export class StringFormatter implements IFormatter {\r\n        /**\r\n         * Formats a string from a DateSliderModel object.\r\n         */\r\n        public format(input: DateSliderModel, options: StringFormatterOptions): string {\r\n            return \"null\";\r\n        }\r\n    }\r\n}\r\n","module DateSlider.Formatter {\r\n    export class UnixTimestampFormatterOptions {\r\n        constructor(\r\n            public type: \"milliseconds\" | \"seconds\",\r\n        ) {\r\n        }\r\n    }\r\n\r\n    export class UnixTimestampFormatter implements IFormatter {\r\n        /**\r\n         * Formats a unix timestamp (in seconds) from a DateSliderModel object.\r\n         */\r\n        public format(input: DateSliderModel, options: UnixTimestampFormatterOptions): number {\r\n            let timestampInMs = Date.UTC(input.model.year, input.model.month - 1, input.model.day, input.model.hour, input.model.minute, input.model.second, 0);\r\n            return timestampInMs / (options.type === \"seconds\" ? 1000 : 1);\r\n        }\r\n    }\r\n}\r\n","module DateSlider.Parser {\r\n    export class CustomParser implements IParser {\r\n        constructor(\r\n            public parse: (input: any, options: any) => DateSliderModel,\r\n        ) {\r\n        }\r\n    }\r\n}\r\n","module DateSlider.Parser {\r\n    export class DateParserOptions {\r\n        constructor(\r\n            public type: \"local\" | \"utc\",\r\n        ) {\r\n        }\r\n    }\r\n\r\n    export class DateParser implements IParser {\r\n        public parse(input: Date, options: DateParserOptions): DateSliderModel {\r\n            return new DateSliderModel(null, input);\r\n        }\r\n    }\r\n}\r\n","module DateSlider.Parser {\r\n    export class StringParserOptions {\r\n        constructor(\r\n            public format: string,\r\n            public culture: string,\r\n        ) {\r\n        }\r\n    }\r\n\r\n    export class StringParser implements IParser {\r\n        public parse(input: string, options: StringParserOptions): DateSliderModel {\r\n            return new DateSliderModel(null, input);\r\n        }\r\n    }\r\n}\r\n","module DateSlider.Parser {\r\n    export class UnixTimestampParserOptions {\r\n        constructor(\r\n            public type: \"milliseconds\" | \"seconds\",\r\n        ) {\r\n        }\r\n    }\r\n\r\n    export class UnixTimestampParser implements IParser {\r\n        /** Parses a unix timestamp from a number. */\r\n        public parse(input: number, options: UnixTimestampParserOptions): DateSliderModel {\r\n            if (typeof input !== \"number\") {\r\n                throw new Error(\"Cannot parse non-number to unix timestamp.\");\r\n            }\r\n\r\n            let date = new Date(input * (options.type === \"seconds\" ? 1000 : 1));\r\n            let model = new InnerModel(date.getUTCFullYear(), date.getUTCMonth() + 1, date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds());\r\n            return new DateSliderModel(model, input);\r\n        }\r\n    }\r\n}\r\n","module DateSlider.Slider {\r\n    export class SliderInstance {\r\n        public element: HTMLElement;\r\n        private sliderElement: HTMLElement;\r\n        private sliderLineStart: HTMLElement;\r\n        private sliderLineElement?: HTMLDivElement;\r\n        private sliderLineEnd: HTMLElement;\r\n        private handleElement: HTMLElement;\r\n        private valueContainerElement?: HTMLElement;\r\n\r\n        private onValueChangeEvent = new DateSliderEventHandler();\r\n        private onSliderHandleGrabEvent = new DateSliderEventHandler();\r\n        private onSliderHandleReleaseEvent = new DateSliderEventHandler();\r\n        private onSliderHandleMoveEvent = new DateSliderEventHandler();\r\n\r\n        private events = {\r\n            load: () => { this.updateHandlePosition(); this.updateValueDisplay(); },\r\n            mousedown: (e: MouseEvent) => this.handleMouseDown(e),\r\n            mousemove: (e: MouseEvent) => this.handleMouseMove(e),\r\n            mouseup: (e: MouseEvent) => this.handleMouseUp(e),\r\n            resize: () => this.updateHandlePosition(),\r\n            touchend: (e: TouchEvent) => this.handleMouseUp(e),\r\n            touchmove: (e: TouchEvent) => this.handleMouseMove(e),\r\n            touchstart: (e: TouchEvent) => this.handleMouseDown(e),\r\n        };\r\n\r\n        public static createAll(options: DateSliderOptions): SliderInstance[] {\r\n            if (!options.sliders) {\r\n                throw new Error(\"Cannot create sliders because options.sliders is not set.\");\r\n            }\r\n            let sliders: SliderInstance[] = [];\r\n            for (let sliderOptions of options.sliders) {\r\n                sliders.push(new SliderInstance(sliderOptions, this.getRangeFromType(sliderOptions)));\r\n            }\r\n            return sliders;\r\n        }\r\n\r\n        private static getRangeFromType(sliderOptions: SliderOptions): SliderRange {\r\n            switch (sliderOptions.type) {\r\n                case \"month\":\r\n                    return new SliderRange(1, 12);\r\n                default:\r\n                    throw new Error(\"SliderOptions.type is not valid.\");\r\n            }\r\n        }\r\n\r\n        constructor(\r\n            private options: SliderOptions,\r\n            private range: SliderRange,\r\n        ) {\r\n            if (options.callback) {\r\n                this.onValueChangeEvent.register(options.callback.onValueChanged);\r\n                this.onSliderHandleGrabEvent.register(options.callback.onSliderHandleGrabbed);\r\n                this.onSliderHandleMoveEvent.register(options.callback.onSliderHandleMoved);\r\n                this.onSliderHandleReleaseEvent.register(options.callback.onSliderHandleReleased);\r\n            }\r\n\r\n            this.onValueChangeEvent.fire(new Context.SliderValueChangeContext(null, this.range.value));\r\n\r\n            if (this.options.template instanceof HTMLElement) {\r\n                this.bootstrapSliderToTemplate();\r\n            } else {\r\n                this.createSliderElement();\r\n            }\r\n\r\n            this.registerListeners();\r\n        }\r\n\r\n        public getValue(): number {\r\n            return this.range.value;\r\n        }\r\n\r\n        public setValue(value: number): void {\r\n            let oldValue = this.range.value;\r\n            this.range.value = value;\r\n            let newValue = this.range.value;\r\n            this.updateValueDisplay();\r\n            this.updateHandlePosition();\r\n            this.onValueChangeEvent.fire(new Context.SliderValueChangeContext(oldValue, newValue));\r\n        }\r\n\r\n        public destroy = (event?: Event): void => {\r\n            window.removeEventListener(\"mouseup\", this.events.mouseup, false);\r\n            window.removeEventListener(\"touchend\", this.events.touchend, false);\r\n            window.removeEventListener(\"load\", this.events.load);\r\n            window.removeEventListener(\"resize\", this.events.resize);\r\n            window.removeEventListener(\"mousemove\", this.events.mousemove, true);\r\n            window.removeEventListener(\"touchmove\", this.events.touchmove, true);\r\n        }\r\n\r\n        private bootstrapSliderToTemplate(): void {\r\n            this.element = (this.options.template as HTMLElement).cloneNode(true) as HTMLElement;\r\n\r\n            this.sliderElement = this.findElementInSlider(\"slider-control-template\");\r\n            this.handleElement = this.findElementInSlider(\"slider-handle-template\");\r\n            this.sliderLineStart = this.findElementInSlider(\"slider-control-start-template\");\r\n            this.sliderLineEnd = this.findElementInSlider(\"slider-control-end-template\");\r\n            this.valueContainerElement = this.findElementInSlider(\"slider-value-container-template\", false);\r\n        }\r\n\r\n        private findElementInSlider(className: string, required = true): HTMLElement {\r\n            let found = this.element.getElementsByClassName(className);\r\n            if (found.length > 0) {\r\n                return found[0] as HTMLElement;\r\n            }\r\n\r\n            if (required) {\r\n                throw new Error(`Cannot find DOM element with class: '${className}' in the template.`);\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n        private createSliderElement(): void {\r\n            this.element = document.createElement(\"div\");\r\n            this.element.classList.add(\"slider\");\r\n\r\n            this.sliderElement = document.createElement(\"div\");\r\n            this.sliderElement.classList.add(\"slider-control\");\r\n\r\n            this.sliderLineStart = document.createElement(\"div\");\r\n            this.sliderLineStart.classList.add(\"slider-control-start\");\r\n\r\n            this.sliderLineElement = document.createElement(\"div\");\r\n            this.sliderLineElement.classList.add(\"slider-control-line\");\r\n\r\n            this.sliderLineEnd = document.createElement(\"div\");\r\n            this.sliderLineEnd.classList.add(\"slider-control-end\");\r\n\r\n            this.handleElement = document.createElement(\"div\");\r\n            this.handleElement.classList.add(\"slider-handle\");\r\n\r\n            this.valueContainerElement = document.createElement(\"div\");\r\n            this.valueContainerElement.classList.add(\"slider-value-container\");\r\n\r\n            this.element.appendChild(this.valueContainerElement);\r\n\r\n            this.sliderElement.appendChild(this.sliderLineStart);\r\n            this.sliderElement.appendChild(this.sliderLineElement);\r\n            this.sliderElement.appendChild(this.sliderLineEnd);\r\n            this.sliderElement.appendChild(this.handleElement);\r\n            this.element.appendChild(this.sliderElement);\r\n        }\r\n\r\n        private registerListeners(): void {\r\n            this.handleElement.addEventListener(\"mousedown\", this.events.mousedown, false);\r\n            this.handleElement.addEventListener(\"touchstart\", this.events.touchstart, false);\r\n\r\n            window.addEventListener(\"load\", this.events.load);\r\n            window.addEventListener(\"resize\", this.events.resize);\r\n        }\r\n\r\n        private handleMouseDown = (e: MouseEvent | TouchEvent): void => {\r\n            if (e instanceof MouseEvent) {\r\n                // prevent default: for example to disable the default image dragging\r\n                e.preventDefault();\r\n            }\r\n\r\n            window.addEventListener(\"touchmove\", this.events.touchmove, true);\r\n            window.addEventListener(\"mousemove\", this.events.mousemove, true);\r\n\r\n            window.addEventListener(\"mouseup\", this.events.mouseup, false);\r\n            window.addEventListener(\"touchend\", this.events.touchend, false);\r\n            this.onSliderHandleGrabEvent.fire(null);\r\n        }\r\n\r\n        private handleMouseUp = (e: MouseEvent | TouchEvent): void => {\r\n            window.removeEventListener(\"touchmove\", this.events.touchmove, true);\r\n            window.removeEventListener(\"mousemove\", this.events.mousemove, true);\r\n\r\n            window.removeEventListener(\"mouseup\", this.events.mouseup, false);\r\n            window.removeEventListener(\"touchend\", this.events.touchend, false);\r\n            this.onSliderHandleReleaseEvent.fire(null);\r\n        }\r\n\r\n        private handleMouseMove = (e: MouseEvent | TouchEvent): void => {\r\n            let position: Vector;\r\n\r\n            if (e instanceof MouseEvent) {\r\n                // prevent default: for example to disable the default image dragging\r\n                e.preventDefault();\r\n                position = new Vector(e.clientX, e.clientY);\r\n            } else if (e instanceof TouchEvent) {\r\n                position = new Vector(e.targetTouches[0].clientX, e.targetTouches[0].clientY);\r\n            }\r\n\r\n            // the ratio of the projection of the s->p vector on the s->e vector\r\n            // imagine that the /'s are orthogonal to the slider line\r\n            // |---------->\r\n            // |\r\n            // |   s       slider start\r\n            // |  / \\\r\n            // | .   \\a    s->a is the projection\r\n            // |  \\  /\\\r\n            // |    p  \\   p is the position of the mouse / touch\r\n            // V        e  slider end\r\n            let start = this.sliderLineStart.getBoundingClientRect();\r\n            let end = this.sliderLineEnd.getBoundingClientRect();\r\n\r\n            let sp = new Vector(position.x - start.left, position.y - start.top);\r\n            let se = new Vector(end.left - start.left, end.top - start.top);\r\n\r\n            let orthogonalProjectionRatio = sp.dot(se) / se.dot(se);\r\n            this.setValue(Math.round((this.range.maximum - this.range.minimum) * orthogonalProjectionRatio + this.range.minimum));\r\n            this.onSliderHandleMoveEvent.fire(null);\r\n        }\r\n\r\n        private updateValueDisplay = (): void => {\r\n            if (this.valueContainerElement) {\r\n                this.valueContainerElement.innerText = this.range.value.toString();\r\n            }\r\n        }\r\n\r\n        private updateHandlePosition = (): void => {\r\n            let position = this.calculateHandlePosition();\r\n            this.handleElement.style.position = \"absolute\";\r\n            this.handleElement.style.left = position.x + \"px\";\r\n            this.handleElement.style.top = position.y + \"px\";\r\n        }\r\n\r\n        private calculateHandlePosition(): Vector {\r\n            // calculates the center of an absolute positioned element\r\n            let calculateCenterPosition = (element: HTMLElement): Vector => {\r\n                return new Vector(element.offsetLeft + element.offsetWidth / 2,\r\n                                  element.offsetTop + element.offsetHeight / 2);\r\n            };\r\n\r\n            let ratioInSlider = this.range.ratio;\r\n            let startPosition = calculateCenterPosition(this.sliderLineStart);\r\n            let endPosition = calculateCenterPosition(this.sliderLineEnd);\r\n\r\n            // start the handle at the start\r\n            // the handle's center should be at the start, so it needs an adjustment\r\n            // finally, calculate the handle's position in the line by it's range value (min: 0% -> max: 100%)\r\n            return new Vector(startPosition.x - this.handleElement.offsetWidth / 2 + (endPosition.x - startPosition.x) * ratioInSlider,\r\n                              startPosition.y - this.handleElement.offsetHeight / 2 + (endPosition.y - startPosition.y) * ratioInSlider);\r\n        }\r\n    }\r\n}\r\n","module DateSlider.Slider {\r\n    export class SliderRange {\r\n        constructor(\r\n            private _minimum: number,\r\n            private _maximum: number,\r\n            private _value?: number,\r\n        ) {\r\n            if (this._minimum === this._maximum) {\r\n                throw new Error(\"Range minimum cannot be equal as maximum.\");\r\n            }\r\n\r\n            if (typeof this._value === \"undefined\" || this._value === null) {\r\n                this._value = this._minimum;\r\n            }\r\n        }\r\n\r\n        public get ratio() {\r\n            return (this.value - this.minimum) / (this.maximum - this.minimum);\r\n        }\r\n\r\n        public get minimum() { return this._minimum; };\r\n\r\n        public set minimum(minimum: number) {\r\n            if (this._maximum <= minimum) {\r\n                throw new Error(\"Range minimum cannot be >= maximum.\");\r\n            }\r\n\r\n            if (minimum > this._value) {\r\n                this._value = minimum;\r\n            }\r\n\r\n            this._maximum = minimum;\r\n        }\r\n\r\n        public get maximum() { return this._maximum; };\r\n\r\n        public set maximum(maximum: number) {\r\n            if (this._minimum >= maximum) {\r\n                throw new Error(\"Range maximum cannot be <= minimum.\");\r\n            }\r\n\r\n            if (maximum < this._value) {\r\n                this._value = maximum;\r\n            }\r\n\r\n            this._maximum = maximum;\r\n        }\r\n\r\n        public get value() { return this._value; };\r\n\r\n        public set value(value: number) {\r\n            if (typeof value !== \"number\") {\r\n                throw new Error(\"SliderRange.setValue(value): value is not a number\");\r\n            }\r\n\r\n            if (value < this._minimum) {\r\n                this._value = this._minimum;\r\n            } else if (value > this._maximum) {\r\n                this._value = this._maximum;\r\n            } else {\r\n                this._value = value;\r\n            }\r\n        }\r\n\r\n        public increment(by = 1): void {\r\n            if (typeof by !== \"number\") {\r\n                throw new Error(\"SliderRange.increment(by): by is not a number\");\r\n            }\r\n\r\n            if (this._value + by <= this._maximum) {\r\n                this._value += by;\r\n            } else {\r\n                this._value = this._maximum;\r\n            }\r\n        }\r\n\r\n        public decrement(by = 1) {\r\n            if (typeof by !== \"number\") {\r\n                throw new Error(\"SliderRange.decrement(by): by is not a number\");\r\n            }\r\n\r\n            if (this._value - by >= this._minimum) {\r\n                this._value -= by;\r\n            } else {\r\n                this._value = this._minimum;\r\n            }\r\n        }\r\n\r\n        public expandMaximum(by = 1): void {\r\n            if (by < 0) {\r\n                throw new Error(\"Cannot expand by negative values.\");\r\n            }\r\n\r\n            if (this._value === this._maximum) {\r\n                this._maximum += by;\r\n                this._value += by;\r\n                return;\r\n            }\r\n\r\n            this._maximum += by;\r\n            this._minimum += by * ((this._value - this._minimum) / (this._value - this._maximum));\r\n        }\r\n\r\n        public expandMinimum(by = -1): void {\r\n            if (by > 0) {\r\n                throw new Error(\"Cannot expand minimum with positive values.\");\r\n            }\r\n\r\n            if (this._value === this._minimum) {\r\n                this._minimum += by;\r\n                this._value += by;\r\n                return;\r\n            }\r\n\r\n            this._minimum += by;\r\n            this._maximum += by * ((this._value - this._maximum) / (this._value - this._minimum));\r\n        }\r\n    }\r\n}\r\n","/// <reference path=\"../../date-slider-event-context.ts\" />\r\n\r\nmodule DateSlider.Slider.Context {\r\n    export class SliderValueChangeContext extends DateSliderEventContext {\r\n        constructor(\r\n            public oldValue: number,\r\n            public newValue: number,\r\n        ) {\r\n            super();\r\n        }\r\n    }\r\n}\r\n"]}